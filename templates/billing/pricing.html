{% extends "base_app.html" %}
{% load i18n %}

{% block title %}Pricing - CV Analyzer{% endblock %}

{% block content %}
<div class="page-header text-center">
    <h1>{% trans "Pricing Plans" %}</h1>
    <p class="text-muted">Choose the plan that fits your needs</p>
</div>

<div class="row g-4 justify-content-center">
    <!-- Free Plan -->
    <div class="col-md-6 col-lg-3">
        <div class="pricing-card">
            <div class="pricing-header">
                <h3>{% trans "Free" %}</h3>
                <div class="pricing-price">0 zl<span>/month</span></div>
            </div>
            <div class="pricing-body">
                <ul class="pricing-features">
                    <li><i class="bi bi-check-circle text-success"></i> 5 analyses per month</li>
                    <li><i class="bi bi-check-circle text-success"></i> 3 active positions</li>
                    <li><i class="bi bi-check-circle text-success"></i> Basic scoring</li>
                    <li><i class="bi bi-check-circle text-success"></i> Section detection</li>
                    <li><i class="bi bi-check-circle text-success"></i> Problem detection</li>
                    <li><i class="bi bi-check-circle text-success"></i> Job matching</li>
                    <li><i class="bi bi-check-circle text-success"></i> Recruitment (HR mode)</li>
                    <li><i class="bi bi-check-circle text-success"></i> Candidate ranking</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> PDF export</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> AI rewriting</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> Interview questions</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> Requirement scoring</li>
                </ul>
                {% if request.user.is_authenticated and request.user.plan == 'free' %}
                <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                {% else %}
                <span class="text-muted">Default plan</span>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Basic Plan -->
    <div class="col-md-6 col-lg-3">
        <div class="pricing-card pricing-popular">
            <div class="pricing-badge">Most Popular</div>
            <div class="pricing-header">
                <h3>{% trans "Basic" %}</h3>
                <div class="pricing-price">79 zl<span>/month</span></div>
            </div>
            <div class="pricing-body">
                <ul class="pricing-features">
                    <li><i class="bi bi-check-circle text-success"></i> 50 analyses per month</li>
                    <li><i class="bi bi-check-circle text-success"></i> 10 active positions</li>
                    <li><i class="bi bi-check-circle text-success"></i> Everything in Free</li>
                    <li><i class="bi bi-check-circle text-success"></i> Recommendations</li>
                    <li><i class="bi bi-check-circle text-success"></i> Skill gap analysis</li>
                    <li><i class="bi bi-check-circle text-success"></i> CV versioning</li>
                    <li><i class="bi bi-check-circle text-success"></i> Analysis history</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> PDF export</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> AI rewriting</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> Interview questions</li>
                    <li class="text-muted"><i class="bi bi-x-circle"></i> Requirement scoring</li>
                </ul>
                {% if request.user.is_authenticated and request.user.plan == 'basic' %}
                <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                {% else %}
                {% for plan in plans %}
                {% if plan.name == 'basic' and plan.stripe_price_id %}
                <a href="{% url 'checkout' plan.id %}" class="btn btn-accent w-100">{% trans "Upgrade to Basic" %}</a>
                {% endif %}
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Premium Plan -->
    <div class="col-md-6 col-lg-3">
        <div class="pricing-card">
            <div class="pricing-header">
                <h3>{% trans "Premium" %}</h3>
                <div class="pricing-price">199 zl<span>/month</span></div>
            </div>
            <div class="pricing-body">
                <ul class="pricing-features">
                    <li><i class="bi bi-check-circle text-success"></i> 300 analyses per month</li>
                    <li><i class="bi bi-check-circle text-success"></i> 50 active positions</li>
                    <li><i class="bi bi-check-circle text-success"></i> Everything in Basic</li>
                    <li><i class="bi bi-check-circle text-success"></i> AI interview questions</li>
                    <li><i class="bi bi-check-circle text-success"></i> Requirement scoring</li>
                    <li><i class="bi bi-check-circle text-success"></i> PDF export</li>
                    <li><i class="bi bi-check-circle text-success"></i> AI rewriting</li>
                    <li><i class="bi bi-check-circle text-success"></i> Benchmarking</li>
                    <li><i class="bi bi-check-circle text-success"></i> Career advisor</li>
                </ul>
                {% if request.user.is_authenticated and request.user.plan == 'premium' %}
                <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                {% else %}
                {% for plan in plans %}
                {% if plan.name == 'premium' and plan.stripe_price_id %}
                <a href="{% url 'checkout' plan.id %}" class="btn btn-outline-primary w-100">{% trans "Upgrade to Premium" %}</a>
                {% endif %}
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Enterprise Plan -->
    <div class="col-md-6 col-lg-3">
        <div class="pricing-card">
            <div class="pricing-header">
                <h3>{% trans "Enterprise" %}</h3>
                <div class="pricing-price">999 zl<span>/month</span></div>
            </div>
            <div class="pricing-body">
                <ul class="pricing-features">
                    <li><i class="bi bi-check-circle text-success"></i> Unlimited analyses</li>
                    <li><i class="bi bi-check-circle text-success"></i> Unlimited positions</li>
                    <li><i class="bi bi-check-circle text-success"></i> Everything in Premium</li>
                    <li><i class="bi bi-check-circle text-success"></i> SLA guarantee</li>
                    <li><i class="bi bi-check-circle text-success"></i> Priority processing</li>
                    <li><i class="bi bi-check-circle text-success"></i> Custom prompts</li>
                    <li><i class="bi bi-check-circle text-success"></i> API access</li>
                </ul>
                {% if request.user.is_authenticated and request.user.plan == 'enterprise' %}
                <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                {% else %}
                {% for plan in plans %}
                {% if plan.name == 'enterprise' and plan.stripe_price_id %}
                <a href="{% url 'checkout' plan.id %}" class="btn btn-outline-primary w-100">{% trans "Upgrade to Enterprise" %}</a>
                {% endif %}
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
